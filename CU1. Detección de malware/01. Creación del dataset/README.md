## Creación del conjunto de datos

Como se ha comentado anteriormente, en este caso de uso se trabajará sobre un dataset generado a partir de diferentes archivos PE (Portable Executable) propios de la plataforma Microsoft Windows. Este dataset consta de dos subconjuntos: el subconjunto de archivos legítimos (no infectados) y el subconjunto de malware. El proceso de creación de este conjunto de datos es el siguiente:

### :one: Creación del subconjunto de datos de archivos legítimos

**1.1** Se crea un directorio que albergará 3.457 muestras de diferentes archivos legítimos (no maliciosos) procedentes de nuestro propio sistema operativo Windows 11. Para ello, se ha accedido a la carpeta `C:\Windows` de nuestro Windows 11 y se han extraído cantidades aleatorias de archivos con extensión *.exe*, *.dll* y *.sys*. Estos ficheros se pueden encontrar en un archivo comprimido llamado `legitimate.7z` en la siguiente URL:
https://drive.google.com/drive/folders/1KgSOpMyK11GkDyfCVsMenV3bhV1rEXYJ?usp=drive_link
    
**1.2** Se diseña un script en *Python* llamado `datasetsCreationFromPEFiles.py`, que se puede encontrar dentro de este repositorio, en el que se emplea el módulo *Pefile* de *Python* para extraer diferentes características de la estructura de los archivos PE obtenidos en el apartado anterior, para posteriormente almacenarlas de forma estructurada en un archivo con etensión *.csv* que será el dataset de archivos legítimos (`legitimateDataset.csv`). Este fichero *.csv* tiene una cabecera donde figura el nombre del fichero PE objeto de iteración y la descripción de las características de su estructura que se han escogido previamente (por considerarse representativas para la detección de malware). A continuación, se encontrará en cada fila, cada uno de los archvivos PE con sus respectivas características.


### :two: Creación del subconjunto de datos de malware

**1.1** Se crea un directorio que albergará 13.971 muestras de diferentes archivos de código malicioso procedentes de los repositorios de [VirusTotal](https://www.virustotal.com) y [VirusShare](https://virusshare.com/). Para ello, se ha solicitado el acceso académico a cada una de estas plataformas de análisis de malware online.
    
**1.2** Este apartado es el mismo que para el dataset de archivos legítimos, ya que, el script `datasetsCreationFromPEFiles.py` crea los dos subconjutos de datos al ejecutarse. La única diferencia es que este nuevo dataset, llamado `malwareDataset.csv`, cogerá los datos del directorio de malware y no del directorio de archivos legítimos. Como el proceso de extracción de características PE es similar, se ha optado por unificar todo el código en un script. Todos estos ficheros de malware se han descargado y agrupado en un único directorio, que se encuentra en un archivo comprimido llamado `malware.7z` en la siguiente URL:
https://drive.google.com/drive/folders/1KgSOpMyK11GkDyfCVsMenV3bhV1rEXYJ?usp=drive_link

Como se trata de código potencialmente peligroso, el fichero se encuentra encriptado. Para desencriptarlo, la contraseña es: `infected`.
